# Bible

## Description

This is a _how to_ project for learning purposes with little practical outcome.
* _How to_ setup virtual machine on a `Windows 10` with `Ubuntu 16`.
* _How to_ share files and folder between `Windows host` and `Ubuntu virtual machine`.
* _How to_ on `Ubuntu virtual machine` setup web server `Apache` + `PHP` + `PostgreSQL` with `Docker`.
* _How to_ from `Windows host` access web server and database on `Ubuntu virtual machine`.
* _How to_ import data from text file to database.


## Environment

* Windows 10 Home  \
  _64-bit operating system, x64-based processor_ \
  _AMD Ryzen 5 1600 Six-Core Processor_ \
  _32 GB RAM_
* VMWare Workstation 12 Player \
  _https://www.vmware.com/products/player/playerpro-evaluation.html_
* Ubuntu 16.04 LTS \
  _https://www.ubuntu.com/download/desktop_
* Docker \
  _https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-ubuntu-16-04_
* Apache + PHP 5.6.30 \
  _https://hub.docker.com/_/php/_
* PostgreSQL 9 + PostGIS \
  _https://hub.docker.com/r/mdillon/postgis/_


## Data

Bible from http://www.gasl.org/refbib/Bible_King_James_Version.pdf


## Setting up Apache + PHP + PostgreSQL environment with Docker

* Install VMWare Workstation 12 Player.
* Setup VMWare virtual machine.
* Install Ubuntu 16.04 on virtual machine.
* Create project folder on Windows
* [Share this folder to Ubuntu](04.Sharing_between_Windows_host_and_Ubuntu_VM.md)
* Install Docker on Ubuntu.
* Place project files into Ubuntu `/home/$USER/apache-php` directory.
* Install Apache + PHP + PostgreSQL on Ubuntu:
```
# go to project directory
cd /home/$USER/apache-php

# build apache-php docker image
docker build -t apache-php .

# run apache-php docker container
docker run -d -p 8080:80 --name apache-php apache-php

# install & run PostgreSQL + PostGIS
docker run --name postgresql -e POSTGRES_PASSWORD=mysecretpassword -d mdillon/postgis
```

## Useful commands

```
# Copy files into apache-php docker container
docker cp -a /home/$USER/apache-php/www/ apache-php:/var/www/html/

# Browse apache-php docker container files & directories
docker exec apache-php ls /var/www/html/

# Stop apache-php
docker stop apache-php

# Start apache-php
docker start apache-php

# Inspect apache-php
docker inspect apache-php

# List docker containers
docker ps -a

# Remove apache-php docker container
docker rm apache-php

# Remove apache-php docker image
docker rmi apache-php
```

## Usage

* What's my web address and port?
```
# Inspect apache-php
docker inspect apache-php

# locate parameters:
# IP aadress: HostConfig -> PortBindings -> HostIp  or  NetworkSettings -> Networks -> bridge -> IPAddress
# Port:       HostConfig -> PortBindings -> HostPort
```

* What's my database host, port, name, user and password?
```
# Inspect postgresql
docker inspect postgresql

# locate parameters:
# host:      NetworkSettings -> Networks -> bridge -> IPAddress
# port:      NetworkSettings -> Ports
# database:  Config -> Env -> POSTGRES_DB
# username:  Config -> Env -> POSTGRES_USER
# password:  Config -> Env -> POSTGRES_PASSWORD
```

* What's my website and database ip address and port if i want to access them from windows?
```
# Inspect Ubuntu IP config
/sbin/ifconfig

# Locate exposed Ip aadress from there.
# It should look something like that:
# ens33     inet addr:192.168.182.132
# You ports should still be the same as on Ubuntu.
# Defaults are 8080 for web server and 5432 for PostgreSQL
```
