## [Setting up Apache + PHP + PostgreSQL environment with Docker](help/01.Index.md)

* Install VMWare Workstation 12 Player.
* Setup VMWare virtual machine.
* Install Ubuntu 16.04 on virtual machine.
* Create project folder on Windows
* [Share this folder to Ubuntu](04.Sharing_between_Windows_host_and_Ubuntu_VM.md)
* Install Docker on Ubuntu.
* Place project files into Ubuntu `/home/$USER/apache-php` directory.
* Install Apache + PHP + PostgreSQL on Ubuntu:
```
# go to project directory
cd /home/$USER/apache-php

# build apache-php docker image
docker build -t apache-php .

# run apache-php docker container
docker run -d -p 80:8080 --name apache-php apache-php

# install & run PostgreSQL + PostGIS
docker run --name postgresql -e POSTGRES_PASSWORD=mysecretpassword -d mdillon/postgis
```

## Useful commands

```
# Copy files into apache-php docker container
docker cp -a /home/$USER/apache-php/www/ apache-php:/var/www/html/

# Browse apache-php docker container files & directories
docker exec apache-php ls /var/www/html/

# Stop apache-php
docker stop apache-php

# Start apache-php
docker start apache-php

# Inspect apache-php
docker inspect apache-php

# List docker containers
docker ps -a

# Remove apache-php docker container
docker rm apache-php

# Remove apache-php docker image
docker rmi apache-php
```

## Usage

* What's my web address and port?
```
# Inspect apache-php
docker inspect apache-php

# locate parameters:
# IP aadress: HostConfig -> PortBindings -> HostIp  or  NetworkSettings -> Networks -> bridge -> IPAddress
# Port:       HostConfig -> PortBindings -> HostPort
```

* What's my database host, port, name, user and password?
```
# Inspect postgresql
docker inspect postgresql

# locate parameters:
# host:      NetworkSettings -> Networks -> bridge -> IPAddress
# port:      NetworkSettings -> Ports
# database:  Config -> Env -> POSTGRES_DB
# username:  Config -> Env -> POSTGRES_USER
# password:  Config -> Env -> POSTGRES_PASSWORD
```
